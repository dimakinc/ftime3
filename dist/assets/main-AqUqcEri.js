import"./modulepreload-polyfill-B5Qt9EMX.js";import{createClient as a}from"https://esm.sh/@supabase/supabase-js@2";const u=a("https://icyemhiqhwcjwjztkwpu.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImljeWVtaGlxaHdjandqenRrd3B1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzY4OTMyMDIsImV4cCI6MjA1MjQ2OTIwMn0.emyxIB9HgyYqXxYunktkZqBqAwUe-BFsV9orIvFmEYE");function m(){const t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let e="";for(let r=0;r<4;r++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}function i(t){const e=document.getElementById("error");e.textContent=t}function d(){const t=document.getElementById("error");t.textContent=""}async function I(){const t=document.getElementById("instructions").value,e=document.getElementById("keys").value.split(`
`).filter(n=>n.trim());if(e.length===0){i("Пожалуйста, введите хотя бы один ключ");return}const r=document.getElementById("convertButton");r.disabled=!0,d();try{const n=[];for(const o of e){const c=m(),{data:y,error:s}=await u.from("keys").insert([{short_id:c,key_value:o,instructions:t}]).select("short_id").single();if(s)throw console.error("Error:",s),s;n.push(c)}const l=n.map(o=>`${window.location.origin}/${o}`);document.getElementById("result").value=l.join(`
`)}catch(n){console.error("Error:",n),i("Произошла ошибка при создании ссылок")}finally{r.disabled=!1}}document.getElementById("convertButton").addEventListener("click",I);
